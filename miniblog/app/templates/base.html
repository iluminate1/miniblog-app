{% load static %}
<!DOCTYPE html>
<html>

<head>
	<title>{{title}}</title>
	<link type="text/css" href="{% static 'css/styles.css' %}" rel="stylesheet" />
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<link rel="shortcut icon" href="{% static 'img/main.ico' %}" type="image/x-icon" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>

<body>
	<table class="table-page" border=0 cellpadding="0" cellspacing="0">
		<tr>
			<td valign=top>
				{% block mainmenu %}
				<div class="header">
					<ul id="mainmenu" class="mainmenu">
						<li>
							<a href="{% url 'home' %}">
								<i class="fa fa-fw fa-home"></i>Book Lib
							</a>
						</li>
						{% for m in menu %}
						<li><a href="{% url m.url_name %}"><i class="{{m.class}}"></i>{{m.title}}</a></li>
						{% endfor %}

						{% if request.user.is_authenticated %}
						<li class="last">
							<a href="{% url 'profile' %}"><i class="fa fa-fw fa-user"></i>{{ user.username }}</a>
							<span> | </span>
							<a href="{% url 'logout' %}"><i class="fa fa-fw fa-trash"></i>Logout</a>
						</li>
						{% else %}
						<li class="last">
							<a href="{% url 'register' %}"><i class="fa fa-fw fa-user-plus"></i> Sing up</a>
							<span> | </span>
							<a href="{% url 'login' %}"><i class="fa fa-fw fa-key"></i> Sing in</a>
						</li>
						{% endif %}
					</ul>
					<div class="clear"></div>
				</div>
				{% endblock mainmenu %}


				<table class="table-content" border=0 cellpadding="0" cellspacing="0">
					<tr>
						<td valign="top" class="left-chapters">
							<ul id="leftchapters">

								{% if cat_selected == 0 %}
								{% if is_profile %}
								<li class="selected">All categoties ({{ cats.count }})</li>
								{% else %}
								<li class="selected">All categoties ({{ item_amount.count }})</li>
								{% endif %}
								{% else %}
								{% if is_profile %}
								<li><a href="{%	url 'profile' %}">All categoties ({{ cats.count }})</a></li>
								{% else %}
								<li><a href="{% url 'home' %}">All categoties ({{ item_amount.count }})</a></li>
								{% endif %}
								{% endif %}

								{% for c in cats %}
								{% if c.item__count > 0 %}
								{% if c.pk == cat_selected %}
								{% if is_profile %}
								<li class="selected">{{c.name}}
								<li>
									{% else %}
								<li class="selected">{{c.name}} ({{c.item__count}})
								<li>
									{% endif %}

									{% else %}
									{% if is_profile %}
								<li><a href="{%	url 'profile_category' c.slug %}">{{c.name}}</a></li>
								{% else %}
								<li><a href="{{ c.get_absolute_url }}">{{c.name}} ({{c.item__count}})</a></li>
								{% endif %}
								{% endif %}
								{% endif %}
								{% endfor %}
							</ul>
						</td>
						<td valign="top" class="content">
							<div class="content-text">
								{% block content %}
								{% endblock %}
								{% if page_obj.has_other_pages %}
								<nav class="list-pages">
									<ul>
										{% if page_obj.has_previous %}
										<li class="page-num">
											<a href="?page=1">&lt;&lt;</a>
										</li>
										<li class="page-num">
											<a href="?page={{ page_obj.previous_page_number }}">&lt;</a>
										</li>
										{% endif %}

										{% for p in paginator.page_range %}
										{% if page_obj.number == p %}
										<li class="page-num page-num-selected">{{ p }}</li>
										{% elif p >= page_obj.number|add:-2 and p <= page_obj.number|add:2 %} <li
											class="page-num">
											<a href="?page={{ p }}">{{ p }}</a>
											</li>
											{% endif %}
											{% endfor %}

											{% if page_obj.has_next %}
											<li class="page-num">
												<a href="?page={{ page_obj.next_page_number }}">&gt;</a>
											</li>
											<li class="page-num">
												<a href="?page={{ paginator.num_pages }}">&gt;&gt;</a>
											</li>
											{% endif %}
									</ul>
								</nav>
								{% endif %}
							</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
		<tr>
			<td valign=top>
				<div id="footer">
					<p>Footer. Some info here</p>
				</div>
			</td>
		</tr>
	</table>
</body>

</html>